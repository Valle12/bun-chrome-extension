// @bun
// IMPORT // Do not remove!
class e{ws;interval=2000;async connect(){if(this.ws)return;try{await fetch("http://localhost:3000",{mode:"no-cors"})}catch(t){console.log("Server not running :(");return}this.ws=new WebSocket("ws://localhost:3000"),console.log("Connected to server!"),this.addListener()}addListener(){if(!this.ws)return;this.ws.onmessage=(t)=>{if(t.data==="reload")chrome.runtime.reload()},this.ws.onclose=()=>{console.log("Connection closed!"),console.clear(),this.ws=void 0,this.retryConnect()}}retryConnect(){this.connect(),setInterval(()=>{this.connect()},this.interval)}}class o{constructor(){let t=new e,n=()=>setInterval(chrome.runtime.getPlatformInfo,20000);chrome.runtime.onStartup.addListener(n),chrome.runtime.onStartup.addListener(()=>t.retryConnect()),chrome.runtime.onInstalled.addListener(n),n()}}new e().connect();new o;
